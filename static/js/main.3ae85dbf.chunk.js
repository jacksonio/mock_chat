(this.webpackJsonpchat=this.webpackJsonpchat||[]).push([[0],{30:function(e,t,a){},31:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},44:function(e,t,a){},48:function(e,t,a){"use strict";a.r(t);var s={};a.r(s),a.d(s,"MessageReaded",(function(){return p})),a.d(s,"MessageSended",(function(){return O}));var n=a(0),c=a(1),i=a.n(c),d=a(16),r=a.n(d),o=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,50)).then((function(t){var a=t.getCLS,s=t.getFID,n=t.getFCP,c=t.getLCP,i=t.getTTFB;a(e),s(e),n(e),c(e),i(e)}))},l=a(5),u=a(2),m=a(11),j=a.n(m),b=a(6),g=a.n(b),h=a(8),p=['<path \n\t\td="M773.495 279.073l-61.528-61.528-276.876 276.876 61.528 61.528 276.876-276.876zM958.077 217.545l-461.46 465.855-184.584-184.584-61.528 61.528 246.112 246.112 527.383-527.383-65.923-61.528zM0 560.344l246.112 246.112 61.528-61.528-246.112-246.112-61.528 61.528z"\n\t/>',"0 0 1024 1024"],O=['<path \n\t\td="M958.077 217.545l-461.46 465.855-184.584-184.584-61.528 61.528 246.112 246.112 527.383-527.383-65.923-61.528zM0 560.344v0z"\n\t/>',"0 0 1024 1024"],v=function(e){var t=e.size,a=void 0===t?20:t,c=e.name,i=e.className,d=void 0===i?"":i,r=a instanceof Array?a:[a,a],o=Object(l.a)(r,2),u=o[0],m=o[1],b=Object(l.a)(s[c],2),g=b[0],h=b[1];return Object(n.jsx)("svg",{className:j()("icon",d),width:u,height:m,dangerouslySetInnerHTML:{__html:g},viewBox:h})},f=(a(30),function(e){var t=e.isReverse,a=e.isRemovable,s=e.messages,c=e.avatar,i=e.onRemove,d=function(e){var t=e.currentTarget.dataset.id;i(+t)};return Object(n.jsxs)("div",{className:j()("item",{reverse:t,removable:a}),children:[Object(n.jsx)("img",{src:c,className:"avatar",alt:"Avatar"}),Object(n.jsx)("div",{className:"list",children:s.map((function(e){return Object(n.jsxs)("div",{className:"list-item",children:[Object(n.jsx)("div",{className:"text",children:e.text}),Object(n.jsx)("div",{className:"time",children:g()(e.date).format("HH:mm")}),Object(n.jsx)(v,{size:15,className:"message-status",name:"sended"===e.status?"MessageSended":"MessageReaded"}),Object(n.jsx)(h.c,{"data-id":e.id,size:18,className:"remove-message",onClick:d})]},e.id)}))})]})}),x=a(17),y=a.n(x),N=(a(31),a(49));g.a.extend(y.a);var k=function(e){var t=e.date,a=Object(N.a)().t;return Object(n.jsx)("div",{className:"title",children:g()(t).calendar(null,{sameDay:"[".concat(a("sameday"),"]"),lastWeek:"D/M",sameElse:"D/M/YYYY"})})};function T(e,t){switch(t.type){case"remove-message":return Object(u.a)(Object(u.a)({},e),{},{messages:e.messages.filter((function(e){return e.id!==t.payload}))});case"add-message":return Object(u.a)(Object(u.a)({},e),{},{messages:e.messages.concat(t.payload)});case"update-status":return Object(u.a)(Object(u.a)({},e),{},{messages:e.messages.map((function(e){return e.id===t.payload.id?Object(u.a)(Object(u.a)({},e),{},{status:t.payload.status}):e}))});default:throw new Error("Unknown action type")}}var M=[{avatar:"https://cdn.pixabay.com/photo/2013/07/13/10/07/man-156584_1280.png",message:"\u041f\u0440\u0438\u0432\u0435\u0442",id:0,date:"2020-10-11T10:09:04.712Z",is:"her"},{avatar:"https://cdn.pixabay.com/photo/2013/07/13/10/07/man-156584_1280.png",message:"\u041a\u0430\u043a \u0434\u0435\u043b\u0430?",id:1,date:"2020-10-11T10:19:04.712Z",is:"her"},{avatar:"https://cdn.pixabay.com/photo/2013/07/13/10/07/man-156584_1280.png",message:"\u042f \u0442\u043e\u043b\u044c\u043a\u043e \u043f\u0440\u0438\u0435\u0445\u0430\u043b \u0441 \u041c\u0430\u0440\u0441\u0430",id:2,date:"2020-10-11T10:24:04.712Z",is:"her"},{avatar:"https://cdn.pixabay.com/photo/2013/07/13/10/07/man-156584_1280.png",message:"\u041f\u0440\u0438\u0432\u0435\u0442! \u0412\u0441\u0435 \u0445\u043e\u0440\u043e\u0448\u043e, \u0442\u044b \u043a\u0430\u043a?",id:3,date:"2020-10-11T11:09:04.712Z",status:"sended",is:"my"},{avatar:"https://cdn.pixabay.com/photo/2013/07/13/10/07/man-156584_1280.png",message:"\u0410\u0430\u0430, \u0434\u0430, \u044f \u0441\u043b\u044b\u0448\u0430\u043b",id:4,date:"2020-10-11T12:09:04.712Z",status:"sended",is:"my"},{avatar:"https://cdn.pixabay.com/photo/2013/07/13/10/07/man-156584_1280.png",message:"\u041a\u0440\u0443\u0442\u043e",id:5,date:"2020-10-11T13:01:04.712Z",status:"readed",is:"my"},{avatar:"https://cdn.pixabay.com/photo/2013/07/13/10/07/man-156584_1280.png",message:"\u041f\u043e\u043b\u0435\u0442 \u043d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u044b\u0439?",id:6,date:"2020-10-11T14:09:07.712Z",status:"readed",is:"my"},{avatar:"https://cdn.pixabay.com/photo/2013/07/13/10/07/man-156584_1280.png",message:"\u0414\u0430, \u0432\u0441\u0435 \u043a\u0440\u0443\u0442\u043e. \u0422\u043e\u043b\u044c\u043a\u043e \u043d\u0438\u043a\u043e\u043c\u0443 \u043d\u0435 \u0433\u043e\u0432\u043e\u0440\u0438)",id:7,date:"2020-10-11T15:09:04.712Z",is:"her"}],w=(a(37),function(e){var t=e.newMessage,a=Object(c.useRef)(),s=Object(c.useReducer)(T,{messages:M}),i=Object(l.a)(s,2),d=i[0],r=i[1];Object(c.useEffect)((function(){t&&(r({type:"add-message",payload:t}),setTimeout((function(){r({type:"update-status",payload:{id:t.id,status:"readed"}})}),1e3))}),[t]),Object(c.useEffect)((function(){a.current.scrollTop=a.current.scrollHeight}),[d.messages.length]);var o=function(e){r({type:"remove-message",payload:e})},m=function(e){var t=[];return e.forEach((function(a,s){if(0===s||e[s-1]){var n=g()((0===s?a:e[s-1]).date).diff(a.date,"day");(0===s||n)&&t.push({type:"title",id:"item-title-".concat(a.id),date:a.date})}if(0===s||a.is!==e[s-1].is)t.push({type:"message",id:"item-message-".concat(a.id),avatar:a.avatar,isReverse:"my"===a.is,isRemovable:"my"===a.is,messages:[{text:a.message,status:a.status,id:a.id,date:a.date}]});else{var c=t.length-1;t[c]=Object(u.a)(Object(u.a)({},t[c]),{},{messages:t[c].messages.concat({text:a.message,status:a.status,id:a.id,date:a.date})})}})),t}(d.messages);return Object(n.jsx)("div",{className:"dialog",children:Object(n.jsx)("div",{className:"overflow",ref:a,children:m.map((function(e){return"message"===e.type?Object(c.createElement)(f,Object(u.a)(Object(u.a)({},e),{},{key:e.id,onRemove:o})):Object(n.jsx)(k,{date:e.date},e.id)}))})})}),S=(a(38),function(e){var t=e.setMessage,a=Object(c.useState)(""),s=Object(l.a)(a,2),i=s[0],d=s[1],r=Object(N.a)().t;return Object(n.jsxs)("form",{className:"sender",onSubmit:function(e){e.preventDefault(),t({id:Date.now(),avatar:"https://cdn.pixabay.com/photo/2013/07/13/10/07/man-156584_1280.png",message:i,date:(new Date).toISOString(),is:"my",status:"sended"}),d("")},children:[Object(n.jsx)("input",{type:"text",onChange:function(e){return d(e.target.value)},value:i,placeholder:r("sendInputPlaceholder"),required:!0}),Object(n.jsx)("button",{type:"submit",children:r("sendButtonText")})]})}),R=(a(39),function(){var e=Object(N.a)().t;return Object(n.jsxs)("div",{className:"user-info",children:[Object(n.jsx)("div",{className:"name",children:"Jack"}),Object(n.jsxs)("div",{className:"status",children:[Object(n.jsx)("span",{className:"circle"}),e("isOnline")]})]})}),_=(a(40),Object(c.createContext)()),z=(a(41),function(){var e=Object(c.useContext)(_),t=e.theme,a=e.toggleTheme;return Object(n.jsx)("div",{className:"theme","data-theme":"light"===t?"dark":"light",onClick:function(e){var t=e.currentTarget.dataset.theme;a(t)},children:"light"===t?Object(n.jsx)(h.a,{size:20,className:"dark"}):Object(n.jsx)(h.b,{className:"yellow",size:20})})}),C=(a(42),function(){var e=Object(N.a)().i18n,t=function(t){e.changeLanguage(t)};return Object(n.jsx)("div",{children:Object(n.jsxs)("div",{className:"btn-group btn-group-sm",role:"group","aria-label":"lang-changing",children:[Object(n.jsx)("button",{className:"btn btn-secondary shadow-none",onClick:function(){return t("ru")},children:"RU"}),Object(n.jsx)("button",{className:"btn btn-secondary shadow-none",onClick:function(){return t("en")},children:"ENG"})]})})}),L=function(){return Object(n.jsxs)("div",{className:"header",children:[Object(n.jsx)(C,{}),Object(n.jsx)(R,{}),Object(n.jsx)(z,{})]})},E=function(){var e=Object(c.useState)(null),t=Object(l.a)(e,2),a=t[0],s=t[1],i=Object(c.useState)(localStorage.getItem("application-theme")||"dark"),d=Object(l.a)(i,2),r=d[0],o=d[1];return Object(c.useEffect)((function(){!function(e){localStorage.setItem("application-theme",e),"dark"===e?(document.body.classList.add("dark"),document.body.classList.remove("light")):(document.body.classList.add("light"),document.body.classList.remove("dark"))}(r)}),[r]),Object(n.jsx)(_.Provider,{value:{theme:r,toggleTheme:o},children:Object(n.jsxs)("div",{className:"container",children:[Object(n.jsx)(L,{}),Object(n.jsx)(w,{newMessage:a}),Object(n.jsx)(S,{setMessage:s})]})})},Z=(a(43),a(44),a(21)),D=a.n(Z),I=a(15),P=a(22),B=a(24),F=a(9);I.a.use(P.a).use(B.a).use(F.e).init({fallbackLng:"ru",debug:!1,backend:{loadPath:"locales/{{lng}}/{{ns}}.json"},detection:{order:["queryString","cookie"],cache:["cookie"]}});I.a,a(46),a(47);D.a.load({google:{families:["Open Sans:300,400,700"]}}),r.a.render(Object(n.jsx)(i.a.StrictMode,{children:Object(n.jsx)(c.Suspense,{fallback:Object(n.jsx)("div",{children:"Loading..."}),children:Object(n.jsx)(E,{})})}),document.getElementById("root")),o()}},[[48,1,2]]]);
//# sourceMappingURL=main.3ae85dbf.chunk.js.map